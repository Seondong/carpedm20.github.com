/*
 *  jQuery Random background-image changer
 *  A jQuery plugin that randomly changes background-image of an element.
 *  
 *
 *  Created by Kim Tae Hoon <carpedm20@gmail.com>
 *  Under MIT License < http://yzlow.mit-license.org>
 */


"use strict";(function($,g,h,j){var k="randomwall";var l=['.jpg','.png'];var m=[];var n='';var o;var p={mode:"raddit",delay_time:0,image_list:[],};function Plugin(a,b){this.$field=$(a);this.options=$.extend(true,{},p,b);this._defaults=p;this.RADDIT=['http://www.reddit.com/r/wallpapers/controversial/.json','http://www.reddit.com/r/wallpapers/.json'];this.init()}Plugin.prototype={init:function(){n=this.options.mode;o=this.$field;if(this.options.image_list.length==0){var a="";if(n=='imgur')a="http://imgur.com/r/wallpapers/hot.json";else a=this.RADDIT[Math.floor(Math.random()*this.RADDIT.length)];$.getJSON(a,this.getUrl)}else{m=this.options.image_list}if(this.options.delay_time!=0){setInterval(this.changeWall,this.options.delay_time)}},getUrl:function(d){if(n=='imgur')var e=d.data;else var e=d.data.children;if(n=='raddit'){e.forEach(function(a){var b=a.data.url;var c=false;for(var i=0;i<l.length;i++){var d=b.indexOf(l[i]);if(d!=-1&&d==b.length-4){m.push(a.data.url);c=true;continue}}if(c==false&&b.indexOf('imgur')!=-1&&b.indexOf('/a/')==-1)m.push(b+'.jpg')})}else{e.forEach(function(a){var b=a.hash;var c=a.mimetype;if(c.indexOf('png')!=-1){m.push("http://i.imgur.com/"+b+'.png')}else{m.push("http://i.imgur.com/"+b+'.jpg')}})}var f=Math.floor(Math.random()*m.length);o.animate({opacity:0},'slow',function(){o.css('background','url('+m[f]+') no-repeat center center fixed').css('background-size','cover').animate({opacity:1},'slow')})},changeWall:function(){var a=m;var b=Math.floor(Math.random()*a.length);o.animate({opacity:0},'slow',function(){o.css('background','url('+a[b]+') no-repeat center center fixed').css('background-size','cover').animate({opacity:1},'slow')})},};$.fn[k]=function(a){return this.each(function(){if(!$.data(this,"yz_"+k)){$.data(this,"yz_"+k,new Plugin(this,a))}})}})(jQuery,window,document);
